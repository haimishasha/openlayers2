<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
    <link rel="stylesheet" href="theme/default/style.css" />
    <script type="text/javascript" src="OpenLayers.js"></script>
    <script type="text/javascript">
    var map;

    function init(){
        map = new OpenLayers.Map('map', {maxResolution:'auto'});
        var wms = new OpenLayers.Layer.WMS( "OpenLayers WMS",
            "http://vmap0.tiles.osgeo.org/wms/vmap0", {layers: 'basic'} );
        map.addLayer(wms);
        map.setCenter(new OpenLayers.LonLat(0, 0), 0);
        
        // Strategy 1:  Style features based on some attribute.
        
        // create 50 random features in the northern hemisphere
        // give them a "type" attribute that will be used to style
        // them by size
        var features = new Array(50);
        for (var i=0; i<features.length; i++) {
            features[i] = new OpenLayers.Feature.Vector(
                new OpenLayers.Geometry.Point(
                    (360 * Math.random()) - 180, 90 * Math.random()
                ), {
                    type: 5 + parseInt(5 * Math.random())
                }
            );
        }
        
        // allow testing of specific renderers via "?renderer=Canvas", etc
        var renderer = OpenLayers.Util.getParameters(window.location.href).renderer;
        renderer = (renderer) ? [renderer] : OpenLayers.Layer.Vector.prototype.renderers;
        
        // create the layer styleMap with a simple symbolizer template
        var layer1 = new OpenLayers.Layer.Vector('Points', {
            styleMap: new OpenLayers.StyleMap({
                pointRadius: "${type}", // based on feature.attributes.type
                fillColor: "#666666"
            }),
            renderers: renderer
        });
        layer1.addFeatures(features);

        // Strategy 2:  Style features based on something besides attributes.

        // create 50 random features in the southern hemisphere
        var features = new Array(50);
        for (var i=0; i<features.length; i++) {
            features[i] = new OpenLayers.Feature.Vector(
                new OpenLayers.Geometry.Point(
                    (360 * Math.random()) - 180, -90 * Math.random()
                ), {
                    type: 5 + parseInt(5 * Math.random())
                }
            );
        }
        // create the layer styleMap by giving the default style a context
        var colors = ["red", "green", "blue"];
        var context = {
            getColor: function(feature) {
                var region = parseInt((feature.geometry.x + 180) / 120);
                return colors[region];
            },
            getSize: function(feature) {
                return feature.attributes["type"] / map.getResolution() * .703125;
            }
        };
        var template = {
            pointRadius: "${getSize}", // using context.getSize(feature)
            fillColor: "${getColor}" // using context.getColor(feature)
        };
        var style = new OpenLayers.Style(template, {context: context});
        var layer2 = new OpenLayers.Layer.Vector('Points', {
            styleMap: new OpenLayers.StyleMap(style),
            renderers: renderer
        });
        layer2.addFeatures(features);


        map.addLayers([layer1, layer2]);
    }
    </script>
</head>
<body onload="init()">
    <div id="map" style="width:500px;height:400px"></div>
</body>
</html>
